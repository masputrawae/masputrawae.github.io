{{- $fontsData := site.Data.fonts -}}
{{- range $fontsData -}}
  {{- if .preload -}}
    {{- $res := resources.Get .file -}}
    {{- if $res -}}
      <link
        rel="preload"
        href="{{ $res.RelPermalink }}"
        as="font"
        type="font/woff2"
        crossorigin
      />
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- /* Font-face CSS */}}
<style>
{{- range $fontsData -}}
  {{- $res := resources.Get .file -}}
  {{- if $res -}}
    @font-face {
      font-family: '{{ .family }}';
      font-style: {{ .style }};
      font-weight: {{ .weight }};
      font-display: swap;
      src: url('{{ $res.RelPermalink }}') format('woff2');
    }
  {{- end -}}
{{- end -}}
</style> {{- /**/ -}}
